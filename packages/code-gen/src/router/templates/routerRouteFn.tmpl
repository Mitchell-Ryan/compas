{{ for (const r of routeTrie.children) { }}
{{= routerMatcher(r) }}
{{ } }}

export function router(ctx, next) {
  let triePath = ctx.method + ctx.path;
  if (triePath.endsWith("/")) {
    triePath = triePath.substring(0, triePath.length - 1);
  }

  const params = {};
  let route = undefined;

  {{ for (const r of routeTrie.children) { }}
  route = {{= r.functionName }}(triePath, params, 0);
  if (route !== undefined) {
    return route(params, ctx, next);
  }
  {{ } }}

  return next();
}
