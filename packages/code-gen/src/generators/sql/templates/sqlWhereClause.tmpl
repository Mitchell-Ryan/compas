{{ if (item.whereFields.length > 0) { }}
{{ let result = "WHERE"; }}
{{ for (const it of item.whereFields) { }}
  {{ result += " (COALESCE(${" + (it.type === "in" ? "sql.array(" : "") + "where." + it.name + (it.type === "in" ? ")" : "") + "}, NULL) IS NULL OR " + item.shortName + "."+ camelToSnakeCase(it.key) + " "; }}

  {{ if (it.type === "equal") { }}
    {{ result += "= ${where." + it.name + "}"; }}
  {{ } else if (it.type === "greaterThan") { }}
    {{ result += "> ${where." + it.name + "}"; }}
  {{ } else if (it.type === "lowerThan") { }}
    {{ result += "< ${where." + it.name + "}"; }}
  {{ } else if (it.type === "like") { }}
    {{ result += "LIKE ${'%' + where." + it.name + " +'%'}"; }}
  {{ } else if (it.type === "in") { }}
    {{ result += "IN (${sql.array(where." + it.name + ")})"; }}
  {{ } }}

  {{ result += ") AND"; }}
{{ } }}
{{= result.substring(0, result.length - 4) }}
{{ } }}
