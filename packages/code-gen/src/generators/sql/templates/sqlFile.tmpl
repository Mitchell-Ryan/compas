{{= options.fileHeader }}

{{ for (const groupName of Object.keys(data)) { }}

  export const {{= groupName }}Queries = {

  {{ for (const itemName of Object.keys(data[groupName])) { }}
    {{ const item = data[groupName][itemName]; }}

    {{ if (item.type === "select") { }}
      /**
       * @param sql
       * @param { {{= item.where }}} where
       * @return {Promise<{{= item.returning }}[]>}
       */
      {{= itemName }}: (sql, where) => sql`{{= item.query }}`,
    {{ } else if (item.type === "update") { }}
      /**
       * @param sql
       * @param { {{= item.where }}} where
       * @param { {{= item.partial }}} partial
       * @return {Promise<{{= item.returning }}[]>}
       */
      {{= itemName }}: (sql, where, partial) => sql`{{= item.query }}`,
    {{ } else if (item.type === "delete") { }}
      /**
       * @param sql
       * @param { {{= item.where }}} where
       * @return {Promise<void>}
       */
      {{= itemName }}: (sql, where) => sql`{{= item.query }}`,
    {{ } else if (item.type === "create") { }}
      /**
       * @param sql
       * @param { {{= item.input }}} input
       * @return {Promise<{{= item.returning }}[]>}
       */
      {{= itemName }}: (sql, input) => {
       {{= item.fnBody }}
      },
    {{ } else if (item.type === "count") { }}
      /**
       * @param sql
       * @param { {{= item.where }}} where
       * @return {Promise<number>}
       */
      {{= itemName }}: async (sql, where) => {
       const result = await sql`{{= item.query}}`;
       return result?.[0]?.gen_sum ?? 0;
      },
    {{ } }}
  {{ } }}

  };

{{ } }}
