<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>compas | Compas</title>
    <meta name="description" content="Unified backend tooling">
    <link rel="stylesheet" href="/assets/style.c3210e46.css">
    <link rel="modulepreload" href="/assets/app.cf930e1c.js">
    <link rel="modulepreload" href="/assets/references_cli.md.48cda47c.lean.js">
    
    <meta name="twitter:title" content="compas | Compas">
  <meta property="og:title" content="compas | Compas">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="Compas, back to home" data-v-675d8756 data-v-cc01ef16><!----> Compas</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/getting-started.html" data-v-b8818f8c>Docs <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/examples.html" data-v-b8818f8c>Examples <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/changelog" data-v-b8818f8c>Changelog <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/releases/index.html" data-v-b8818f8c>Release notes <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/compasjs/compas" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/getting-started.html" data-v-b8818f8c>Docs <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/examples.html" data-v-b8818f8c>Examples <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/changelog" data-v-b8818f8c>Changelog <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/releases/index.html" data-v-b8818f8c>Release notes <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/compasjs/compas" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/getting-started.html">Getting started</a><!----></li><li class="sidebar-link"><p class="sidebar-link-item">Features</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/features/cli.html">CLI</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/lint-setup.html">Linting and formatting</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/typescript-setup.html">Typescript setup</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/logger-and-events.html">Logger &amp; events</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/config-files.html">Configuration files</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/test-and-bench-runner.html">Testing and benchmarking</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/http-server.html">HTTP server</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/postgres-and-minio.html">Postgres and Minio</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/code-gen-validators.html">Code generation</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/code-gen-api.html">Code generation API</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/code-gen-api-client.html">Code generation API client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/code-gen-sql.html">Code generation SQL queries</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/code-gen-crud.html">Code generation CRUD</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/migrations.html">Postgres migrations</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/background-jobs.html">Background jobs</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/session-handling.html">Session handling</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/file-handling.html">File handling</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/extending-the-cli.html">Extending the CLI</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/features/route-invalidations.html">Route invalidations</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/examples.html">Examples</a><!----></li><li class="sidebar-link"><p class="sidebar-link-item">References</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/references/compas-config.html">Compas configuration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/references/cli.html">CLI Reference</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-completions">compas completions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-check-env">compas check-env</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-code-mod">compas code-mod</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-code-mod-list">compas code-mod list</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-code-mod-exec">compas code-mod exec</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-docker">compas docker</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-docker-up">compas docker up</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-docker-down">compas docker down</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-docker-clean">compas docker clean</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-init">compas init</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-lint">compas lint</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-migrate">compas migrate</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-migrate-info">compas migrate info</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-migrate-rebuild">compas migrate rebuild</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-run">compas run</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-run-script">compas run $script</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-test">compas test</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-version">compas version</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-visualise">compas visualise</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-visualise-erd">compas visualise erd</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-help">compas help</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compas-watch">compas watch</a><!----></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/migrations/index.html">Migrations</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/migrations/store.html">@compas/store</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="compas" tabindex="-1"><code>compas</code> <a class="header-anchor" href="#compas" aria-hidden="true">#</a></h1><p>The Compas CLI</p><p>Unified backend tooling.</p><p>Examples:</p><ul><li>compas docker up</li><li>compas lint --jsdoc</li><li>compas visualise erd --generated-directory ./src/generated</li></ul><p>References:</p><ul><li>Docs: <a href="https://compasjs.com" target="_blank" rel="noopener noreferrer">https://compasjs.com</a></li><li>Source: <a href="https://github.com/compasjs/compas" target="_blank" rel="noopener noreferrer">https://github.com/compasjs/compas</a></li><li>Issues: <a href="https://github.com/compasjs/compas/issues" target="_blank" rel="noopener noreferrer">https://github.com/compasjs/compas/issues</a></li></ul><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h2 id="compas-completions" tabindex="-1"><code>compas completions</code> <a class="header-anchor" href="#compas-completions" aria-hidden="true">#</a></h2><p>Configure shell auto-complete for this CLI.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h2 id="compas-check-env" tabindex="-1"><code>compas check-env</code> <a class="header-anchor" href="#compas-check-env" aria-hidden="true">#</a></h2><p>Various checks helping with a better Compas experience.</p><p>This command is able to check a few things in the current project, to see if it is optimally configured.</p><ul><li>Checks if the &#39;.env.local&#39; is in the .gitignore if it exists</li><li>Checks if all Compas packages are the same version</li></ul><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h2 id="compas-code-mod" tabindex="-1"><code>compas code-mod</code> <a class="header-anchor" href="#compas-code-mod" aria-hidden="true">#</a></h2><p>Execute code-mods to help migrating to new Compas versions.</p><p>Since Compas generates quite a bit of boilerplate, this command can help you migrate to new Compas versions that have breaking changes in generated code. By detecting usage patterns of the generated output of a previous Compas version, it can migrate (most of) your usages to whatever the new version brings.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h3 id="compas-code-mod-list" tabindex="-1"><code>compas code-mod list</code> <a class="header-anchor" href="#compas-code-mod-list" aria-hidden="true">#</a></h3><p>List the available code-mods.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h3 id="compas-code-mod-exec" tabindex="-1"><code>compas code-mod exec</code> <a class="header-anchor" href="#compas-code-mod-exec" aria-hidden="true">#</a></h3><p>Execute the specified code-mod.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--name</td><td>The code-mod name to execute. (string, required)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h2 id="compas-docker" tabindex="-1"><code>compas docker</code> <a class="header-anchor" href="#compas-docker" aria-hidden="true">#</a></h2><p>Manage common docker components.</p><p>Manages a single PostgreSQL and Minio container for use in all your local projects. It can switch between multiple PostgreSQL versions (12, 13 and 14 are supported via --postgres-version), however only a single version can be &#39;up&#39; at a time.</p><p>PostgreSQL credentials:</p><blockquote><p>postgresql://postgres:postgres@127.0.0.1:5432/postgres</p></blockquote><p>Minio credentials:</p><ul><li>ACCESS_KEY: minio</li><li>SECRET_KEY: minio123</li></ul><p>Don&#39;t use this command and secrets for your production deployment.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--postgres-version</td><td>Specify the PostgreSQL version to use. Defaults to 12. (number)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h3 id="compas-docker-up" tabindex="-1"><code>compas docker up</code> <a class="header-anchor" href="#compas-docker-up" aria-hidden="true">#</a></h3><p>Start the managed containers.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--postgres-version</td><td>Specify the PostgreSQL version to use. Defaults to 12. (number)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h3 id="compas-docker-down" tabindex="-1"><code>compas docker down</code> <a class="header-anchor" href="#compas-docker-down" aria-hidden="true">#</a></h3><p>Stop the managed containers.</p><p>Stop any of the containers that could possibly be started by this CLI. It ignores context and stops any PostgreSQL container started by this CLI, ignoring <code>--postgres-version</code>.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--postgres-version</td><td>Specify the PostgreSQL version to use. Defaults to 12. (number)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h3 id="compas-docker-clean" tabindex="-1"><code>compas docker clean</code> <a class="header-anchor" href="#compas-docker-clean" aria-hidden="true">#</a></h3><p>Clean up all containers and volumes, or only the PostgreSQL databases of the specified projects.</p><p>When no arguments are passed, all created docker containers and volumes are removed.</p><p>By passing &#39;--project&#39;, it can clean up PostgreSQL databases without having to restart the containers. The flag is repeatable, so multiple projects can be cleaned at the same time. If no value is passed, it defaults to &#39;process.<wbr>env.APP_NAME&#39;.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--project</td><td>Specify the project(s) to remove. If no value is passed, the current project is read from <code>environment.APP_NAME</code>. (booleanOrString[])</td></tr><tr><td>--postgres-version</td><td>Specify the PostgreSQL version to use. Defaults to 12. (number)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h2 id="compas-init" tabindex="-1"><code>compas init</code> <a class="header-anchor" href="#compas-init" aria-hidden="true">#</a></h2><p>Init various files in the current project.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--all</td><td>Enable &#39;--gitignore&#39;, &#39;--jsconfig&#39; and &#39;--lint-config&#39;. (boolean)</td></tr><tr><td>--gitignore</td><td>Creates or overwrites the .gitignore, with defaults for IDE(s), Yarn/NPM and caches. (boolean)</td></tr><tr><td>--jsconfig</td><td>Creates or overwrites the root jsconfig.json file, to use with the Typescript Language Server. (boolean)</td></tr><tr><td>--lint-config</td><td>Creates or overwrites .eslintrc.cjs, .eslintignore and .prettierignore files, and overwrites the &#39;prettier&#39; key in the package.json. (boolean)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h2 id="compas-lint" tabindex="-1"><code>compas lint</code> <a class="header-anchor" href="#compas-lint" aria-hidden="true">#</a></h2><p>Lint all project files.</p><p>Uses Prettier and ESLint to lint project files.</p><p>ESLint is used for all JavaScript files and Prettier runs on JavaScript, JSON, Markdown, and YAML files. The default configuration can be initialized via &#39;compas init --lint-config&#39;.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--skip-prettier</td><td>Skip running Prettier. (boolean)</td></tr><tr><td>--skip-eslint</td><td>Skip running ESLint. (boolean)</td></tr><tr><td>--eslint-cache-location</td><td>Location of ESLint cache directory. Defaults to &#39;.cache/eslint/&#39;. (string)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h2 id="compas-migrate" tabindex="-1"><code>compas migrate</code> <a class="header-anchor" href="#compas-migrate" aria-hidden="true">#</a></h2><p>Run PostgreSQL migrations via the @compas/store migration system.</p><p>The migrations are managed via the @compas/store provided system. And are forward only.</p><p>A custom Postgres connection object can be provided by exporting a &#39;postgresConnectionSettings&#39; object from the files specified via the &#39;--connection-settings&#39; flag.</p><p>This command can keep running if for example your deploy system does not support one of tasks. You can use &#39;--keep-alive&#39; for that. It keeps a single Postgres connection alive to ensure that the process doesn&#39;t exit. The migration runner uses an advisory lock to ensure only a single migration process runs at the same time. To disable this behaviour when the command enters watch mode, &#39;--without-lock&#39; can be passed.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--connection-settings</td><td>Specify a path that contains the PostgreSQL connection object. (string)</td></tr><tr><td>--keep-alive</td><td>Keep the service running, by maintaining a single idle SQL connection. (boolean)</td></tr><tr><td>--without-lock</td><td>Drop the migration lock, before entering the keep-alive state. Only used when <code>--keep-alive</code> is passed as well (boolean)</td></tr><tr><td>--watch</td><td>Run the command, restarting it when file changes happen. See &#39;compas help watch&#39; for more information. (boolean)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h3 id="compas-migrate-info" tabindex="-1"><code>compas migrate info</code> <a class="header-anchor" href="#compas-migrate-info" aria-hidden="true">#</a></h3><p>Print the current migration state.</p><p>Print information about the migration state and exit. The information consists of migrations that are not applied yet, and migrations that have &#39;hashChanges&#39;, basically saying that the file on disk is out of sync with the migration that was applied in the past.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--connection-settings</td><td>Specify a path that contains the PostgreSQL connection object. (string)</td></tr><tr><td>--keep-alive</td><td>Keep the service running, by maintaining a single idle SQL connection. (boolean)</td></tr><tr><td>--without-lock</td><td>Drop the migration lock, before entering the keep-alive state. Only used when <code>--keep-alive</code> is passed as well (boolean)</td></tr><tr><td>--watch</td><td>Run the command, restarting it when file changes happen. See &#39;compas help watch&#39; for more information. (boolean)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h3 id="compas-migrate-rebuild" tabindex="-1"><code>compas migrate rebuild</code> <a class="header-anchor" href="#compas-migrate-rebuild" aria-hidden="true">#</a></h3><p>Recreate migration state based on the file system.</p><p>Rebuild migration table with current file state. This allows for reordering migrations, squashing migrations and other things that alter the migration files, but do not affect the schema in any way. Note that Compas can&#39;t enforce any consistency between the migration files and the current schema state. So use with caution.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--connection-settings</td><td>Specify a path that contains the PostgreSQL connection object. (string)</td></tr><tr><td>--keep-alive</td><td>Keep the service running, by maintaining a single idle SQL connection. (boolean)</td></tr><tr><td>--without-lock</td><td>Drop the migration lock, before entering the keep-alive state. Only used when <code>--keep-alive</code> is passed as well (boolean)</td></tr><tr><td>--watch</td><td>Run the command, restarting it when file changes happen. See &#39;compas help watch&#39; for more information. (boolean)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h2 id="compas-run" tabindex="-1"><code>compas run</code> <a class="header-anchor" href="#compas-run" aria-hidden="true">#</a></h2><p>Run arbitrary JavaScript files, scripts defined in the package.json and scripts located in the scripts directory.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--script-args</td><td>undefined (string)</td></tr><tr><td>--node-args</td><td>undefined (string)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h3 id="compas-run-script" tabindex="-1"><code>compas run $script</code> <a class="header-anchor" href="#compas-run-script" aria-hidden="true">#</a></h3><p>The file or script to run.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--watch</td><td>Run the command, restarting it when file changes happen. See &#39;compas help watch&#39; for more information. (boolean)</td></tr><tr><td>--script-args</td><td>undefined (string)</td></tr><tr><td>--node-args</td><td>undefined (string)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h2 id="compas-test" tabindex="-1"><code>compas test</code> <a class="header-anchor" href="#compas-test" aria-hidden="true">#</a></h2><p>Run all tests in your project.</p><p>The test runner searches for all files ending with &#39;.test.js&#39; and runs them. Tests run in series in a single worker and subtests run serially in the order they are defined. If &#39;--serial&#39; is not passed, there will be multiple workers each executing parts of the tests.</p><p>Test files should be ordinary JavaScript files. By calling &#39;mainTestFn&#39; at the top of your file you can still use &#39;node ./path/to/file.test.js&#39; to execute the tests.</p><p>Global configuration can be applied to the test runners via a &#39;test/config.js&#39; file. A global timeout can be configured by setting &#39;export const timeout = 2500;&#39;. The value is specified in milliseconds. There is also a global &#39;setup&#39; and &#39;teardown&#39; function that can be exported from the &#39;test/config.js&#39; file. They may return a Promise.</p><p>To prevent flaky tests, &#39;--randomize-rounds&#39; can be used. This shuffles the order in which the tests are started. And prevents dependencies between test files. Making it easier to run a single test file via for examples &#39;compas run ./path/to/file.test.js&#39;.</p><p>Collecting and processing coverage information is done using C8. Use one of the supported configuration files by C8 to alter its behaviour. See <a href="https://www.npmjs.com/package/c8" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/c8</a> for more information.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--serial</td><td>Run tests serially instead of in parallel. Alternatively set &#39;--parallel-count 1&#39; (boolean)</td></tr><tr><td>--parallel-count</td><td>The number of workers to use, when running in parallel. Defaulting to (the number of CPU cores - 1) or 4, whichever is lower. (number)</td></tr><tr><td>--randomize-rounds</td><td>Runs test the specified amount of times, shuffling the test file order between runs. (number)</td></tr><tr><td>--coverage</td><td>Collect coverage information while running the tests. (boolean)</td></tr><tr><td>--watch</td><td>Run the command, restarting it when file changes happen. See &#39;compas help watch&#39; for more information. (boolean)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h2 id="compas-version" tabindex="-1"><code>compas version</code> <a class="header-anchor" href="#compas-version" aria-hidden="true">#</a></h2><p>Print the installed Compas version and exit</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h2 id="compas-visualise" tabindex="-1"><code>compas visualise</code> <a class="header-anchor" href="#compas-visualise" aria-hidden="true">#</a></h2><p>Visualise various code-generated structures.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h3 id="compas-visualise-erd" tabindex="-1"><code>compas visualise erd</code> <a class="header-anchor" href="#compas-visualise-erd" aria-hidden="true">#</a></h3><p>Visualise entity structure and relations in a diagram.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>--generated-directory</td><td>The directory containing the generated files. (string, required)</td></tr><tr><td>--format</td><td>Output file format. Supports png, webp, pdf and svg. Defaults to svg. (string)</td></tr><tr><td>--output</td><td>Path to write the output to. Defaults to a random temporary file. (string)</td></tr><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h2 id="compas-help" tabindex="-1"><code>compas help</code> <a class="header-anchor" href="#compas-help" aria-hidden="true">#</a></h2><p>Display help for any of the available commands.</p><p>// TODO</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table><h2 id="compas-watch" tabindex="-1"><code>compas watch</code> <a class="header-anchor" href="#compas-watch" aria-hidden="true">#</a></h2><p>Run the command, restarting it when file changes happen.</p><p>Some commands in this CLI can be watched. They can be executed via <code>compas watch [..subCommand]</code> or by adding the &#39;--watch&#39; flag when invoking the command.</p><p>The watching happens by monitoring all the files in your project and restarting the command once files are changed. Manually restarting is also possible by sending <code>rs&lt;enter&gt;</code> to the program.</p><p>Watch behaviour can be tuned by commands. Setting &#39;modifiers.isWatchable&#39; to &#39;true&#39; is necessary for it to allow watching, and &#39;watchSettings&#39; can be specified with custom extensions to be watched or specific directories to ignore. When watch behavior is needed for custom scripts, following the steps in <a href="https://compasjs.com/features/extending-the-cli.html" target="_blank" rel="noopener noreferrer">extending the cli</a> is mandatory.</p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">const</span> cliDefinition <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;my-command&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">shortDescription</span><span class="token operator">:</span> <span class="token string">&quot;My command&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">modifiers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">isWatchable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// This is mandatory</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watchSettings</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Defaults to &#39;[&quot;js&quot;, &quot;json&quot;]&#39;</span>
    <span class="token literal-property property">ignorePatterns</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;__fixtures__&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Defaults to &#39;[&quot;.cache&quot;, &quot;coverage&quot;, &quot;node_modules&quot;]&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>You can also add a compas config file at &#39;config/compas.{js,json}&#39; to specify project specific items. They are appended to the specification of the command and can be used if your tests write files that may trigger the watcher. See the <a href="https://compasjs.com/references/compas-config.html" target="_blank" rel="noopener noreferrer">Compas configuration reference</a> for more information about the allowed options.</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;cli&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;globalWatchOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;extensions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ignorePatterns&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;__fixtures__&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test/tmp&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>-h, --help</td><td>Display information about the current command. (boolean)</td></tr></tbody></table></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><a class="link" href="https://github.com/compasjs/compas/edit/main/docs/references/cli.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>Edit this page on GitHub <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-07c132fc><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/references/compas-config" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>Compas configuration</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/migrations/" data-v-38ede35f><span class="text" data-v-38ede35f>Migrations</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"changelog.md\":\"a051c557\",\"contributing.md\":\"9bfce678\",\"examples.md\":\"20a7d50d\",\"features_background-jobs.md\":\"37d26688\",\"features_cli.md\":\"da0bbfcf\",\"features_code-gen-api-client.md\":\"4198e896\",\"features_code-gen-api.md\":\"5566d552\",\"features_code-gen-crud.md\":\"ef8194cf\",\"features_code-gen-sql.md\":\"c8c939a1\",\"features_code-gen-validators.md\":\"199472e2\",\"features_config-files.md\":\"0f11a587\",\"features_extending-the-cli.md\":\"6c205d8e\",\"features_file-handling.md\":\"8e8a72df\",\"features_http-server.md\":\"f0b10171\",\"features_lint-setup.md\":\"0e7b41d2\",\"features_logger-and-events.md\":\"9b76c254\",\"features_migrations.md\":\"233899ca\",\"features_postgres-and-minio.md\":\"507a97c4\",\"features_route-invalidations.md\":\"0e15fb4e\",\"features_session-handling.md\":\"098b3081\",\"features_test-and-bench-runner.md\":\"de3d5eee\",\"features_typescript-setup.md\":\"bae7af0c\",\"getting-started.md\":\"b88cae49\",\"index.md\":\"e7192c6b\",\"migrations_index.md\":\"83f1951e\",\"migrations_store.md\":\"6cddb0dd\",\"references_cli.md\":\"48cda47c\",\"references_compas-config.md\":\"fcd50741\",\"releases_0.0.103.md\":\"ffffe48f\",\"releases_0.0.115.md\":\"82be64cd\",\"releases_0.0.119.md\":\"857e335c\",\"releases_0.0.124.md\":\"64749ebb\",\"releases_0.0.138.md\":\"387d8339\",\"releases_0.0.158.md\":\"c5ef0701\",\"releases_0.0.171.md\":\"29980ce0\",\"releases_0.0.172.md\":\"f5893116\",\"releases_0.0.180.md\":\"4f4d6bea\",\"releases_0.0.79.md\":\"81bb756d\",\"releases_0.0.81.md\":\"f0c81d75\",\"releases_0.0.83.md\":\"9893b66f\",\"releases_0.0.84.md\":\"80f2a6ce\",\"releases_0.0.89.md\":\"389c7324\",\"releases_index.md\":\"d46c73ba\"}")</script>
    <script type="module" async src="/assets/app.cf930e1c.js"></script>
    
  </body>
</html>